@startuml Fluxo de Criação e Aprovação de Orçamento
title Fluxo de Criação e Aprovação de Orçamento

actor "Prestador de Serviços" as PS
actor "Cliente" as C
participant "Sistema Easy Budget" as EB
database "Banco de Dados" as DB

PS -> EB: Login
EB -> DB: Verifica credenciais
DB --> EB: Confirma login
EB --> PS: Acesso concedido

PS -> EB: Cria novo orçamento
EB -> DB: Salva orçamento
DB --> EB: Confirma salvamento

PS -> EB: Adiciona itens ao orçamento
EB -> DB: Atualiza orçamento
DB --> EB: Confirma atualização

PS -> EB: Finaliza e envia orçamento
EB -> DB: Atualiza status do orçamento
DB --> EB: Confirma atualização
EB -> C: Envia notificação por email

C -> EB: Acessa link do orçamento
EB -> DB: Recupera detalhes do orçamento
DB --> EB: Retorna dados do orçamento
EB --> C: Exibe orçamento

C -> EB: Aprova ou rejeita orçamento
EB -> DB: Atualiza status do orçamento
DB --> EB: Confirma atualização
EB -> PS: Envia notificação de aprovação/rejeição

alt Orçamento aprovado
PS -> EB: Converte orçamento em pedido
EB -> DB: Cria novo pedido
DB --> EB: Confirma criação do pedido
EB --> PS: Exibe confirmação do pedido
else Orçamento rejeitado
PS -> EB: Revisa orçamento (opcional)
EB -> DB: Atualiza orçamento
DB --> EB: Confirma atualização
end

@enduml
